{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"scheduler-entry","identifier":"akeneo-fetch-families-and-attributes","name":"Akeneo - Fetch - Families and Attributes","object":{"parameters":{"job":[{"prototype":"run-incoming","parameters":{"incoming":"akeneo-fetch-families"}}],"handlers":[],"priority":2,"expression":"*/5 * * * *"}},"description":"This will fetch Families from Akeneo then further fetch the data of attribute and its options inside the transformer.","owner":null,"disabled":true}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"incoming-configuration","identifier":"akeneo-fetch-families","name":"Akeneo - Fetch - Families and Attributes","object":{"parameters":{"entityType":"base-family","subscriber":{"prototype":"http-subscriber","parameters":{"client":"akeneo-http-client","request":{"uri":"/api/rest/v1/families","payload":[],"plugins":[],"payloadType":"data","authentications":[]},"pagination":{"prototype":"next","parameters":{"pattern":"_links.next","pageLimit":10000}},"deserializer":{"prototype":"json","parameters":{"pattern":"_embedded.items","readMethod":"wholeFile","encodeInput":false}}}},"transformers":["akeneo-fetch-and-convert-family-attributes-into-alumio-base-attributes","akeneo-filter-previous-family"]}},"description":"This Incoming will fetch Families from Akeneo then further fetch the data of attribute and its options inside the transformer.","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"http-client","identifier":"akeneo-http-client","name":"Akeneo - HTTP Client","object":{"prototype":"akeneo-http-client-v2","parameters":{"key":"","baseUri":"${AKENEO_BASE_URL}","clientId":"${AKENEO_CLIENT_ID}","password":"${AKENEO_PASSWORD}","username":"${AKENEO_USERNAME}","clientSecret":"${AKENEO_CLIENT_SECRET}","enableLogging":true,"loggerFormatter":"full"}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"entity","identifier":"base-family","name":"Base - Family","object":{"parameters":{"schema":[],"identifierPath":["code"]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"akeneo-fetch-and-convert-family-attributes-into-alumio-base-attributes","name":"Akeneo - Fetch and convert - Family attributes into Alumio Base attributes","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"pattern-move","parameters":{"pattern":"attributes.*","conditions":[],"replacement":"attributes.$1.code"}},{"meta":[],"prototype":"list-transformer-wrapper","parameters":{"transformers":["akeneo-fetch-and-update-storage-family-variants-axes"]}}]}},"akeneo-prepare-convert-labels-to-localizations","akeneo-convert-family-to-alumio-base",{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"key","parameters":{"keys":[],"root":"attributes"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"list-transformer-wrapper","parameters":{"transformers":["akeneo-fetch-attribute-by-code","akeneo-prepare-convert-labels-to-localizations","akeneo-check-and-fetch-attribute-options","akeneo-convert-attribute-to-alumio-base-attribute","akeneo-map-type-code-to-alumio-base-code","akeneo-check-axes-is-super-attribute"]}}]}}]}},"description":"This transformer will fetch the attributes data inside a family then converting them into Alumio Base attributes.","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"akeneo-fetch-and-update-storage-family-variants-axes","name":"Akeneo - Fetch and update storage - Family Variants - Axes","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"limit","value":100,"mappers":[]},{"key":"endpoint","value":"/api/rest/v1/families/&{code}/variants","mappers":[]}]}},{"meta":[],"prototype":"merger","parameters":{"template":{"data":"&{_embedded.items || `[]`}","total":"&{items_count || `0`}"},"transformer":{"meta":[],"prototype":"http-transformer","parameters":{"client":"akeneo-http-client","request":{"uri":"&{endpoint}","payload":{"limit":"&{limit}","with_count":"true"},"plugins":[],"payloadType":"data","authentications":[]}}}}}]}},{"meta":{"name":"Build Pagination"},"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"total_page","value":["&{total}","&{limit}"],"mappers":[{"prototype":"operator","parameters":{"operator":"division"}},{"prototype":"cast-int","parameters":[]}]},{"key":"newData","value":"&{total_page}","mappers":[{"prototype":"cast-int","parameters":[]}]}]}},{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"list-fill","parameters":{"start":0,"length":"&{@}"}}],"accessor":{"prototype":"key","parameters":{"keys":["newData"]}}}},{"meta":[],"prototype":"accessor-move","parameters":{"source":{"prototype":"key","parameters":{"keys":[],"root":"newData"}},"destination":{"prototype":"structure","parameters":{"key":"index","keys":[],"root":"newData","value":"value"}},"stripEnclosures":true}},{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"list-values","parameters":[]}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"newData"}}}},{"meta":[],"prototype":"recursively-copy-values-to-children","parameters":{"mergeTemplate":{"limit":"&{limit}","endpoint":"&{endpoint}"},"childrenPattern":"newData.*"}}]}}]}},{"meta":{"name":"Pagination - Execute next page"},"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"newData.*"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"cast-int","parameters":[]},{"prototype":"prepared-operator","parameters":{"left":null,"right":[2],"operator":"addition"}}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"index"}}}},{"meta":[],"prototype":"merger","parameters":{"template":{"data":"&{_embedded.items || `[]`}"},"transformer":{"meta":[],"prototype":"http-transformer","parameters":{"client":"akeneo-http-client","request":{"uri":"&{endpoint}","payload":{"page":"&{index}","limit":"&{limit}","with_count":"true"},"plugins":[{"prototype":"logger","parameters":{"formatter":"simple"}}],"payloadType":"data","authentications":[]}}}}},{"meta":[],"prototype":"key-filter","parameters":{"accessor":{"prototype":"key","parameters":{"keys":["limit","index","total"]}},"conditions":[]}}]}},{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"newArray","value":["&{notFound || `[]`}","&{notFound || `[]`}"],"mappers":[]}]}},{"meta":[],"prototype":"pattern-move","parameters":{"pattern":"newData.*.data.*","conditions":[],"replacement":"newArray.$1.$2"}},{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"operator","parameters":{"operator":"array-merge"}}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"newArray"}}}},{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"results","value":["&{data}","&{newArray}"],"mappers":[{"prototype":"operator","parameters":{"operator":"array-merge"}}]}]}},{"meta":[],"prototype":"key-filter","parameters":{"accessor":{"prototype":"key","parameters":{"keys":["data","newArray"]}},"conditions":[]}}]}},{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"results.*.variant_attribute_sets.*"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"isSuper","value":true,"mappers":[]}]}},{"meta":[],"prototype":"storage-save-entity-in-storage","parameters":{"source":"isSuper","storage":"akeneo-family-variants-axes","storageKey":"&{axes[0]}"}}]}}]}},"description":"This transformer is a custom pagination HTTP call to get family variants.\n\nIt will then be save the family axes in the storage Akeneo - Family Variants - Axes.","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"storage","identifier":"akeneo-family-variants-axes","name":"Akeneo - Family Variants - Axes","object":{"parameters":{"path":"akeneo-family-variants-axes-01K2PMG2BNHQ2S297B3GKXXGMT","logger":{"parameters":{"actions":[]}}}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"akeneo-prepare-convert-labels-to-localizations","name":"Akeneo - Prepare convert - Labels - To localizations","object":{"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"accessor-move","parameters":{"source":{"prototype":"key","parameters":{"keys":[],"root":"labels"}},"destination":{"prototype":"structure","parameters":{"key":"localeCode","keys":[],"root":"localizations","value":"translation"}},"stripEnclosures":true}},{"meta":[],"prototype":"value-remover","parameters":{"patterns":[{"key":"labels"}]}}]}},"description":"Change labels from Akeneo into Alumio Base localizations","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"akeneo-convert-family-to-alumio-base","name":"Akeneo - Convert - Family to Alumio Base","object":{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"key-filter","parameters":{"accessor":{"prototype":"key","parameters":{"keys":[]}},"conditions":[{"prototype":"not-one-of","parameters":{"value":["code","attributes","localizations"]}}]}}]}},"description":"This transformer will convert the family structure into Alumio Base.","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"akeneo-fetch-attribute-by-code","name":"Akeneo - Fetch - Attribute by code","object":{"prototype":"data","parameters":{"filters":[],"transformers":[{"prototype":"http-transformer","parameters":{"client":"akeneo-http-client","request":{"uri":"/api/rest/v1/attributes/&{code}","payload":[],"plugins":[],"payloadType":"data","authentications":[]}}}]}},"description":"Getting attribute data from Akeneo using code.","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"akeneo-check-and-fetch-attribute-options","name":"Akeneo  - Check and fetch - Attribute options","object":{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"type"}},"conditions":[{"prototype":"one-of","parameters":{"value":["pim_catalog_simpleselect","pim_catalog_multiselect"]}}]}}],"elseCases":[{"filter":{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"type"}},"conditions":[{"prototype":"one-of","parameters":{"value":["akeneo_reference_entity","akeneo_reference_entity_collection"]}}]}},"transformer":{"meta":[],"prototype":"list-transformer-wrapper","parameters":{"transformers":["akeneo-fetch-and-convert-attribute-options-from-entity-records-to-alumio-base-attribute-options"]}}}],"transformers":[{"meta":[],"prototype":"list-transformer-wrapper","parameters":{"transformers":["akeneo-fetch-and-convert-attribute-options-to-alumio-base-attribute-options"]}}],"elseTransformers":[]}}]}},"description":"Fetch the attribute options when the attribute is simple select or multiselect.","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"akeneo-fetch-and-convert-attribute-options-to-alumio-base-attribute-options","name":"Akeneo - Fetch and convert - Attribute Options - To Alumio Base Attribute Options","object":{"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"limit","value":100,"mappers":[]},{"key":"endpoint","value":"/api/rest/v1/attributes/&{code}/options","mappers":[]}]}},{"meta":[],"prototype":"merger","parameters":{"template":{"data":"&{_embedded.items || `[]`}","total":"&{items_count || `0`}"},"transformer":{"meta":[],"prototype":"http-transformer","parameters":{"client":"akeneo-http-client","request":{"uri":"&{endpoint}","payload":{"limit":"&{limit}","with_count":"true"},"plugins":[],"payloadType":"data","authentications":[]}}}}}]}},{"meta":{"name":"Build Pagination"},"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"total_page","value":["&{total}","&{limit}"],"mappers":[{"prototype":"operator","parameters":{"operator":"division"}},{"prototype":"cast-int","parameters":[]}]},{"key":"newData","value":"&{total_page}","mappers":[{"prototype":"cast-int","parameters":[]}]}]}},{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"list-fill","parameters":{"start":0,"length":"&{@}"}}],"accessor":{"prototype":"key","parameters":{"keys":["newData"]}}}},{"meta":[],"prototype":"accessor-move","parameters":{"source":{"prototype":"key","parameters":{"keys":[],"root":"newData"}},"destination":{"prototype":"structure","parameters":{"key":"index","keys":[],"root":"newData","value":"value"}},"stripEnclosures":true}},{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"list-values","parameters":[]}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"newData"}}}},{"meta":[],"prototype":"recursively-copy-values-to-children","parameters":{"mergeTemplate":{"limit":"&{limit}","endpoint":"&{endpoint}"},"childrenPattern":"newData.*"}}]}}]}},{"meta":{"name":"Pagination - Execute next page"},"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"newData.*"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"cast-int","parameters":[]},{"prototype":"prepared-operator","parameters":{"left":null,"right":[2],"operator":"addition"}}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"index"}}}},{"meta":[],"prototype":"merger","parameters":{"template":{"data":"&{_embedded.items || `[]`}"},"transformer":{"meta":[],"prototype":"http-transformer","parameters":{"client":"akeneo-http-client","request":{"uri":"&{endpoint}","payload":{"page":"&{index}","limit":"&{limit}","with_count":"true"},"plugins":[{"prototype":"logger","parameters":{"formatter":"simple"}}],"payloadType":"data","authentications":[]}}}}},{"meta":[],"prototype":"key-filter","parameters":{"accessor":{"prototype":"key","parameters":{"keys":["limit","index","total"]}},"conditions":[]}}]}},{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"newArray","value":["&{notFound || `[]`}","&{notFound || `[]`}"],"mappers":[]}]}},{"meta":[],"prototype":"pattern-move","parameters":{"pattern":"newData.*.data.*","conditions":[],"replacement":"newArray.$1.$2"}},{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"operator","parameters":{"operator":"array-merge"}}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"newArray"}}}},{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"options","value":["&{data}","&{newArray}"],"mappers":[{"prototype":"operator","parameters":{"operator":"array-merge"}}]}]}},{"meta":[],"prototype":"key-filter","parameters":{"accessor":{"prototype":"key","parameters":{"keys":["data","newArray"]}},"conditions":[]}}]}},{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"key","parameters":{"keys":[],"root":"options"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"list-transformer-wrapper","parameters":{"transformers":["akeneo-prepare-convert-labels-to-localizations","akeneo-convert-attribute-option-alumio-base-attribute-option"]}}]}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"akeneo-convert-attribute-option-alumio-base-attribute-option","name":"Akeneo - Convert - Attribute Option - Alumio Base Attribute Option","object":{"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"key-filter","parameters":{"accessor":{"prototype":"key","parameters":{"keys":[]}},"conditions":[{"prototype":"not-one-of","parameters":{"value":["identifier","code","localizations"]}}]}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"akeneo-fetch-and-convert-attribute-options-from-entity-records-to-alumio-base-attribute-options","name":"Akeneo - Fetch and convert - Attribute Options - From entity records to Alumio Base Attribute Options","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"limit","value":100,"mappers":[]},{"key":"endpoint","value":"/api/rest/v1/reference-entities/&{reference_data_name}/records","mappers":[]}]}},{"meta":[],"prototype":"merger","parameters":{"template":{"data":"&{_embedded.items || `[]`}","total":"&{items_count || `0`}"},"transformer":{"meta":[],"prototype":"http-transformer","parameters":{"client":"akeneo-http-client","request":{"uri":"&{endpoint}","payload":{"limit":"&{limit}","with_count":"true"},"plugins":[],"payloadType":"data","authentications":[]}}}}}]}},{"meta":{"name":"Build Pagination"},"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"total_page","value":["&{total}","&{limit}"],"mappers":[{"prototype":"operator","parameters":{"operator":"division"}},{"prototype":"cast-int","parameters":[]}]},{"key":"newData","value":"&{total_page}","mappers":[{"prototype":"cast-int","parameters":[]}]}]}},{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"list-fill","parameters":{"start":0,"length":"&{@}"}}],"accessor":{"prototype":"key","parameters":{"keys":["newData"]}}}},{"meta":[],"prototype":"accessor-move","parameters":{"source":{"prototype":"key","parameters":{"keys":[],"root":"newData"}},"destination":{"prototype":"structure","parameters":{"key":"index","keys":[],"root":"newData","value":"value"}},"stripEnclosures":true}},{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"list-values","parameters":[]}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"newData"}}}},{"meta":[],"prototype":"recursively-copy-values-to-children","parameters":{"mergeTemplate":{"limit":"&{limit}","endpoint":"&{endpoint}"},"childrenPattern":"newData.*"}}]}}]}},{"meta":{"name":"Pagination - Execute next page"},"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"newData.*"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"cast-int","parameters":[]},{"prototype":"prepared-operator","parameters":{"left":null,"right":[2],"operator":"addition"}}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"index"}}}},{"meta":[],"prototype":"merger","parameters":{"template":{"data":"&{_embedded.items || `[]`}"},"transformer":{"meta":[],"prototype":"http-transformer","parameters":{"client":"akeneo-http-client","request":{"uri":"&{endpoint}","payload":{"page":"&{index}","limit":"&{limit}","with_count":"true"},"plugins":[{"prototype":"logger","parameters":{"formatter":"simple"}}],"payloadType":"data","authentications":[]}}}}},{"meta":[],"prototype":"key-filter","parameters":{"accessor":{"prototype":"key","parameters":{"keys":["limit","index","total"]}},"conditions":[]}}]}},{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"newArray","value":["&{notFound || `[]`}","&{notFound || `[]`}"],"mappers":[]}]}},{"meta":[],"prototype":"pattern-move","parameters":{"pattern":"newData.*.data.*","conditions":[],"replacement":"newArray.$1.$2"}},{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"operator","parameters":{"operator":"array-merge"}}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"newArray"}}}},{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"options","value":["&{data}","&{newArray}"],"mappers":[{"prototype":"operator","parameters":{"operator":"array-merge"}}]}]}},{"meta":[],"prototype":"key-filter","parameters":{"accessor":{"prototype":"key","parameters":{"keys":["data","newArray"]}},"conditions":[]}}]}},{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"key","parameters":{"keys":[],"root":"options"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"list-transformer-wrapper","parameters":{"transformers":["akeneo-convert-attribute-option-from-akeneo-entity-records-to-alumio-base-attribute-option"]}}]}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"akeneo-convert-attribute-option-from-akeneo-entity-records-to-alumio-base-attribute-option","name":"Akeneo - Convert - Attribute Option - From Akeneo Entity Records to Alumio Base Attribute Option","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"values.label.*"}},"nodeFilters":[],"nodeTransformers":[{"prototype":"pattern-move","parameters":{"pattern":"locale","conditions":[],"replacement":"localeCode"}},{"prototype":"pattern-move","parameters":{"pattern":"data","conditions":[],"replacement":"translation"}},{"prototype":"value-remover","parameters":{"patterns":[{"key":"channel"}]}}]}},{"prototype":"data","parameters":{"filters":[],"transformers":[{"prototype":"pattern-move","parameters":{"pattern":"values.label.*","conditions":[],"replacement":"localizations.$1"}},{"prototype":"key-filter","parameters":{"accessor":{"prototype":"key","parameters":{"keys":[]}},"conditions":[{"prototype":"not-one-of","parameters":{"value":["code","localizations"]}}]}}]}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"akeneo-convert-attribute-to-alumio-base-attribute","name":"Akeneo - Convert - Attribute - To Alumio Base Attribute","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"pattern-move","parameters":{"pattern":"type","conditions":[],"replacement":"typeCode"}},{"meta":[],"prototype":"key-filter","parameters":{"accessor":{"prototype":"key","parameters":{"keys":[]}},"conditions":[{"prototype":"not-one-of","parameters":{"value":["identifier","isSuper","code","typeCode","options","localizations","localizable","is_mandatory"]}}]}}]}}]}},"description":"This transformer will convert the attribute structure into Alumio Base.","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"akeneo-map-type-code-to-alumio-base-code","name":"Akeneo - Map - Type code - To Alumio Base code","object":{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"string-replace","parameters":{"search":"pim_catalog_"}}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"typeCode"}}}}]}},"description":"This transformer will convert the attribute code value into Alumio Base.","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"akeneo-check-axes-is-super-attribute","name":"Akeneo - Check - Axes - Is Super Attribute","object":{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"isSuper","value":false,"mappers":[]}]}},{"meta":[],"prototype":"storage-get-entity-from-storage","parameters":{"storage":"akeneo-family-variants-axes","storageKey":"&{code}","destination":"isSuper"}}]}},"description":"This transformer checks the super attribute using storage Akeneo - Family Variants - Axes that created by the Incoming Akeneo - Fetch - Families.","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"akeneo-filter-previous-family","name":"Akeneo - Filter previous - Family","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"type-setter","parameters":{"entityType":"base-family"}},{"meta":[],"prototype":"storage-filter-stored-entity","parameters":{"storage":"akeneo-filter-previously-family","addEntityToStorage":true}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"storage","identifier":"akeneo-filter-previously-family","name":"Akeneo - Filter previous - Family ","object":{"parameters":{"path":"akeneo-filter-previously-family-01K2PMG2BVR3P4S559S9QJTCH6","logger":{"parameters":{"actions":[]}}}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"scheduler-entry","identifier":"magento-2-send-attribute-sets-and-attributes","name":"Magento 2 - Send - Attribute Sets and Attributes","object":{"parameters":{"job":[{"prototype":"run-incoming","parameters":{"incoming":"magento-2-fetch-attributes"}},{"prototype":"run-outgoing","parameters":{"route":"synchronize-akeneo-families-and-attributes-to-magento-2-attributes-sets-and-attributes","numTasks":100}}],"handlers":[],"priority":2,"expression":"*/15 * * * *"}},"description":"This scheduler will fetch current Magento 2 attributes to  determine if we need to update or create those attributes.\n\nIt will then convert the Alumio Base into Magento 2 and send the data.","owner":null,"disabled":true}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"incoming-configuration","identifier":"magento-2-fetch-attributes","name":"Magento 2 - Fetch - Attributes","object":{"parameters":{"subscriber":{"prototype":"http-subscriber","parameters":{"client":"magento-2-http-client","request":{"uri":"/rest/${MAGENTO_STORE}/V1/products/attributes?searchCriteria={}","payload":[],"plugins":[],"payloadType":"data","authentications":[]},"deserializer":{"prototype":"json","parameters":{"pattern":"items","readMethod":"wholeFile","encodeInput":false}},"requestListeners":[]}},"transformers":["magento-2-save-attribute-id"]}},"description":"We fetch the current attributes in Magento 2 system to avoid duplication attributes of the same code.","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"http-client","identifier":"magento-2-http-client","name":"Magento 2 - HTTP Client","object":{"parameters":{"ssl":{"ssl_enable_npn":true,"ssl_verifyhost":true,"ssl_verifypeer":true,"ssl_enable_alpn":true},"proxy":[],"plugins":[{"prototype":"base-uri","parameters":{"uri":{"parameters":"${MAGENTO_BASE_URL}"},"config":[]}},{"prototype":"logger","parameters":{"formatter":"full"}},{"prototype":"header-append","parameters":{"headers":{"Accept":"application/json","Content-Type":"application/json"}}}],"httpauth":[],"connection":[],"development":{"resolve":[],"connect_to":[]},"authentications":[{"prototype":"magento-2-integration-oauth1","parameters":{"signature":{"prototype":"oauth1-hmac-sha256","parameters":[]},"accessToken":"${MAGENTO_ACCESS_TOKEN}","consumerKey":"${MAGENTO_CONSUMER_KEY}","consumerSecret":"${MAGENTO_CONSUMER_SECRET}","accessTokenSecret":"${MAGENTO_ACCESS_TOKEN_SECRET}"}}],"enableErrorHandling":true,"errorHttpCodeRanges":[{"to":500,"from":400},{"to":600,"from":500}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"magento-2-save-attribute-id","name":"Magento 2 - Save - Attribute Id","object":{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"storage-save-entity-in-storage","parameters":{"source":"attribute_id","storage":"magento-2-attribute-akeneo-code-to-magento-2-id","storageKey":"&{attribute_code}"}}]}},"description":"Save the Magento 2 Id base on the attribute code to make it possible updating data from Akeneo.","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"storage","identifier":"magento-2-attribute-akeneo-code-to-magento-2-id","name":"Magento 2 - Attribute - Akeneo Code to Magento 2 Id","object":{"parameters":{"path":"magento-2-attribute-akeneo-code-to-magento-2-id-01K2PMG2FA7G1HCKPR60XRVVDJ","logger":{"parameters":{"actions":[]}}}},"description":"Akeneo Attribute Code into Magento 2 Attribute Id","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"route-configuration","identifier":"synchronize-akeneo-families-and-attributes-to-magento-2-attributes-sets-and-attributes","name":"Synchronize Akeneo Families and Attributes to Magento 2 Attributes Sets and Attributes","object":{"parameters":{"incoming":"akeneo-fetch-families","outgoing":"magento-2-send-attribute-sets-and-attributes","realtime":false,"transformers":[],"waitingStatus":false,"parallelExecution":[]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"outgoing-configuration","identifier":"magento-2-send-attribute-sets-and-attributes","name":"Magento 2 - Send - Attribute Sets and Attributes","object":{"parameters":{"publisher":{"prototype":"no-action-publisher","parameters":[]},"transformers":["magento-2-convert-attributes-from-alumio-base-family","magento-2-check-and-send-attributes-from-family-with-separate-options-send","magento-2-convert-attribute-set-from-alumio-family","magento-2-check-and-send-attribute-set","magento-2-prepare-send-attribute-set-group","magento-2-send-attribute-set-group","magento-2-prepare-send-attributes-assign-to-attribute-set","magento-2-send-attributes-assign-to-attribute-set"]}},"description":"This Outgoing will convert the Alumio Base into Magento 2.\n\nIt will then creating the Attributes and the options.\n\nCreate Attribute groups.\n\nCreate Attribute sets.\n\nAnd finally attach the Attribute into the Attribute Sets and Group.","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"magento-2-convert-attributes-from-alumio-base-family","name":"Magento 2 - Convert - Attributes from Alumio Base Family","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"key","parameters":{"keys":[],"root":"attributes"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"list-transformer-wrapper","parameters":{"transformers":["magento-2-prepare-convert-typecode-value-mapped-to-magento","magento-2-convert-attribute-from-alumio-base"]}}]}}]}},"description":"Convert attribute and attribute options inside the Alumio Base into Magento 2 Attribute payload","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"magento-2-prepare-convert-typecode-value-mapped-to-magento","name":"Magento 2 - Prepare convert - TypeCode value mapped to Magento 2","object":{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"dictionary-map","parameters":{"map":[["simpleselect","select"],["metric","text"],["price_collection","price"],["identifier","text"],["file","text"],["asset_collection","text"],["file","text"],["image","media_image"],["akeneo_reference_entity_collection","multiselect"],["akeneo_reference_entity","select"],["number","text"]],"comparator":"equals"}}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"typeCode"}}}}]}},"description":"Map TypeCode value from Alumio Base into Magento 2","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"magento-2-convert-attribute-from-alumio-base","name":"Magento 2 - Convert - Attribute from Alumio Base","object":{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"attribute","value":{"scope":"global","is_unique":0,"is_visible":1,"is_required":"&{is_mandatory}","is_comparable":1,"is_searchable":1,"attribute_code":"&{code}","frontend_input":"&{typeCode}","is_user_defined":1,"is_visible_on_front":1,"default_frontend_label":"&{(localizations[?localeCode=='en_US'].translation | [0]) || (localizations[?localeCode=='en_GB'].translation | [0]) || (localizations[].translation | [0])}"},"mappers":[]}]}},{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"string-lower","parameters":[]}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"attribute.attribute_code"}}}},{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"and-condition","parameters":{"filters":[{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"isSuper"}},"conditions":[{"prototype":"equals","parameters":{"value":true}}]}},{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"typeCode"}},"conditions":[{"prototype":"one-of","parameters":{"value":["select","multiselect"]}}]}}]}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"attribute.is_filterable","value":1,"mappers":[]}]}}],"elseTransformers":[]}},{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"typeCode"}},"conditions":[{"prototype":"one-of","parameters":{"value":["select","multiselect"]}}]}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"list-transformer-wrapper","parameters":{"transformers":["magento-2-attribute-option-from-alumio-base"]}}],"elseTransformers":[]}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"magento-2-attribute-option-from-alumio-base","name":"Magento 2 - Attribute option - from Alumio Base","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"prototype":"node","parameters":{"accessor":{"prototype":"key","parameters":{"keys":[],"root":"options"}},"nodeFilters":[],"nodeTransformers":[{"prototype":"pattern-copy","parameters":{"pattern":"code","conditions":[],"replacement":"test.value"}},{"prototype":"value-setter","parameters":{"configurations":[{"key":"test.label","value":"&{(localizations[?localeCode=='en_US'].translation | [0]) || (localizations[?localeCode=='en_GB'].translation | [0]) || (localizations[].translation | [0])}","mappers":[]}]}}]}},{"prototype":"data","parameters":{"filters":[],"transformers":[{"prototype":"pattern-move","parameters":{"pattern":"options.*.test","conditions":[],"replacement":"attribute.options.$1"}}]}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"magento-2-check-and-send-attributes-from-family-with-separate-options-send","name":"Magento 2 - Check and Send - Attributes from family with separate Options Send","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"key","parameters":{"keys":[],"root":"attributes"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"and-condition","parameters":{"filters":[{"prototype":"key-condition","parameters":{"filter":{"prototype":"key-exists-condition","parameters":{"path":"attribute.options"}}}},{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"options"}},"conditions":[{"prototype":"not-equals","parameters":{"value":[]}}]}}]}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"pattern-move","parameters":{"pattern":"attribute.options","conditions":[],"replacement":"optionsMagento"}}],"elseTransformers":[]}},{"meta":[],"prototype":"storage-get-entity-from-storage","parameters":{"storage":"magento-2-attribute-akeneo-code-to-magento-2-id","storageKey":"&{code}","destination":"attribute.attribute_id"}},{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"key-condition","parameters":{"filter":{"prototype":"key-not-exists-condition","parameters":{"path":"attribute.attribute_id"}}}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"merger","parameters":{"template":{"result":"&{@}"},"transformer":{"meta":[],"prototype":"http-transformer","parameters":{"client":"magento-2-http-client","request":{"uri":"/rest/${MAGENTO_STORE}/V1/products/attributes","method":"POST","payload":{"attribute":"&{attribute}"},"plugins":[],"payloadType":"data","authentications":[]}}}}},{"meta":[],"prototype":"storage-save-entity-in-storage","parameters":{"source":"result.attribute_id","storage":"magento-2-attribute-akeneo-code-to-magento-2-id","storageKey":"&{code}"}},{"meta":[],"prototype":"pattern-copy","parameters":{"pattern":"result.attribute_id","conditions":[],"replacement":"attribute.attribute_id"}}],"elseTransformers":[{"meta":[],"prototype":"value-remover","parameters":{"patterns":[{"key":"attribute.attribute_code"}]}},{"meta":[],"prototype":"merger","parameters":{"template":{"result":"&{@}"},"transformer":{"meta":[],"prototype":"http-transformer","parameters":{"client":"magento-2-http-client","request":{"uri":"/rest/${MAGENTO_STORE}/V1/products/attributes/&{code}","method":"PUT","payload":{"attribute":"&{attribute}"},"plugins":[],"payloadType":"data","authentications":[]}}}}}]}},{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"and-condition","parameters":{"filters":[{"prototype":"key-condition","parameters":{"filter":{"prototype":"key-exists-condition","parameters":{"path":"optionsMagento"}}}},{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"optionsMagento"}},"conditions":[{"prototype":"not-equals","parameters":{"value":[]}}]}}]}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"recursively-copy-values-to-children","parameters":{"mergeTemplate":{"attrCode":"&{code}"},"childrenPattern":"optionsMagento.*"}}],"elseTransformers":[]}},{"meta":[],"prototype":"list-transformer-wrapper","parameters":{"transformers":["magento-2-check-and-send-attribute-options"]}}]}}]}},"description":"This will sync the attribute and each attribute options.","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"magento-2-check-and-send-attribute-options","name":"Magento 2 - Check and Send - Attribute Options","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"optionsMagento.*"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"list-transformer-wrapper","parameters":{"transformers":["magento-2-check-and-send-attribute-option"]}}]}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"magento-2-check-and-send-attribute-option","name":"Magento 2 - Check and Send - Attribute Option","object":{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"storage-get-entity-from-storage","parameters":{"storage":"magento-2-attribute-options-akeneo-code-to-magento-2-id","storageKey":"&{attrCode}::&{value}","destination":"id"}},{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"key-condition","parameters":{"filter":{"prototype":"key-not-exists-condition","parameters":{"path":"id"}}}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"merger","parameters":{"template":{"result":"&{@}"},"transformer":{"meta":[],"prototype":"http-transformer","parameters":{"client":"magento-2-http-client","request":{"uri":"/rest/${MAGENTO_STORE}/V1/products/attributes/&{attrCode}/options","method":"POST","payload":{"option":{"label":"&{label}"}},"plugins":[],"payloadType":"data","authentications":[]}}}}},{"meta":[],"prototype":"storage-save-entity-in-storage","parameters":{"source":"result.0","storage":"magento-2-attribute-options-akeneo-code-to-magento-2-id","storageKey":"&{attrCode}::&{value}"}}],"elseTransformers":[{"meta":[],"prototype":"http-transformer","parameters":{"client":"magento-2-http-client","request":{"uri":"/rest/${MAGENTO_STORE}/V1/products/attributes/&{attrCode}/options/&{id}","method":"PUT","payload":{"option":{"label":"&{label}"}},"plugins":[],"payloadType":"data","authentications":[]}}}]}}]}},"description":"This will check option to determine update or create of a single attribute option","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"storage","identifier":"magento-2-attribute-options-akeneo-code-to-magento-2-id","name":"Magento 2 - Attribute Options - Akeneo Code to Magento 2 Id","object":{"parameters":{"path":"magento-2-attribute-options-akeneo-code-to-magento-2-id-01K2PMG2EVTMT1PVYH521WYZ03","logger":{"parameters":{"actions":[]}}}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"magento-2-convert-attribute-set-from-alumio-family","name":"Magento 2 - Convert - Attribute set from Alumio family","object":{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"attributeSet","value":{"entity_type_id":4,"attribute_set_name":"&{(localizations[?localeCode=='en_US'].translation | [0]) || (localizations[?localeCode=='en_GB'].translation | [0]) || (localizations[].translation | [0])}"},"mappers":[]},{"key":"skeletonId","value":4,"mappers":[]}]}}]}},"description":"This transformer will convert the Alumio family into Magento 2 attribute set payload.","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"magento-2-check-and-send-attribute-set","name":"Magento 2 - Check and send - Attribute set","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"storage-get-entity-from-storage","parameters":{"storage":"magento-2-attribute-sets-akeneo-code-to-magento-2-id","storageKey":"&{code}","destination":"attributeSet.attribute_set_id"}},{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"key-condition","parameters":{"filter":{"prototype":"key-not-exists-condition","parameters":{"path":"attributeSet.attribute_set_id"}}}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"merger","parameters":{"template":{"result":"&{@}"},"transformer":{"meta":[],"prototype":"http-transformer","parameters":{"client":"magento-2-http-client","request":{"uri":"/rest/${MAGENTO_STORE}/V1/products/attribute-sets","method":"POST","payload":{"skeletonId":"&{skeletonId}","attributeSet":"&{attributeSet}"},"plugins":[],"payloadType":"data","authentications":[]}}}}},{"meta":[],"prototype":"storage-save-entity-in-storage","parameters":{"source":"result.attribute_set_id","storage":"magento-2-attribute-sets-akeneo-code-to-magento-2-id","storageKey":"&{code}"}},{"meta":[],"prototype":"pattern-copy","parameters":{"pattern":"result.attribute_set_id","conditions":[],"replacement":"attributeSet.attribute_set_id"}}],"elseTransformers":[{"meta":[],"prototype":"merger","parameters":{"template":{"result":"&{@}"},"transformer":{"meta":[],"prototype":"http-transformer","parameters":{"client":"magento-2-http-client","request":{"uri":"/rest/${MAGENTO_STORE}/V1/products/attribute-sets/&{attributeSet.attribute_set_id}","method":"PUT","payload":{"attributeSet":"&{attributeSet}"},"plugins":[],"payloadType":"data","authentications":[]}}}}}]}}]}}]}},"description":"This transformer will create or update the attribute set.","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"storage","identifier":"magento-2-attribute-sets-akeneo-code-to-magento-2-id","name":"Magento 2 - Attribute sets - Akeneo Code to Magento 2 Id","object":{"parameters":{"path":"magento-2-attribute-sets-akeneo-code-to-magento-2-id-01K2PMG2CBNS462C7BV889CJP9","logger":{"parameters":{"actions":[]}}}},"description":"Map Akeneo Family Code into Magento 2 Attribute Sets Id","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"magento-2-prepare-send-attribute-set-group","name":"Magento 2 - Prepare send - Attribute Set Group","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"group","value":{"attribute_set_id":"&{attributeSet.attribute_set_id}","attribute_group_name":"&{attributeSet.attribute_set_name}"},"mappers":[]}]}}]}}]}},"description":"This transformer will prepare the attribute set group payload base on the attribute set.","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"magento-2-send-attribute-set-group","name":"Magento 2 - Send - Attribute Set Group","object":{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"storage-get-entity-from-storage","parameters":{"storage":"magento-2-attribute-set-group-akeneo-code-to-magento-2-id","storageKey":"&{code}","destination":"attribute_group_id"}},{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"key-condition","parameters":{"filter":{"prototype":"key-not-exists-condition","parameters":{"path":"attribute_group_id"}}}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"merger","parameters":{"template":{"result_group":"&{@}"},"transformer":{"meta":[],"prototype":"http-transformer","parameters":{"client":"magento-2-http-client","request":{"uri":"/rest/${MAGENTO_STORE}/V1/products/attribute-sets/groups","method":"POST","payload":{"group":"&{group}"},"plugins":[],"payloadType":"data","authentications":[]}}}}},{"meta":[],"prototype":"storage-save-entity-in-storage","parameters":{"source":"result_group.attribute_group_id","storage":"magento-2-attribute-set-group-akeneo-code-to-magento-2-id","storageKey":"&{code}"}},{"meta":[],"prototype":"pattern-copy","parameters":{"pattern":"result_group.attribute_group_id","conditions":[],"replacement":"attribute_group_id"}}],"elseTransformers":[]}}]}},"description":"This transformer will create the attribute set group if there none created.","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"storage","identifier":"magento-2-attribute-set-group-akeneo-code-to-magento-2-id","name":"Magento 2 - Attribute Set Group - Akeneo Code to Magento 2 Id","object":{"parameters":{"path":"magento-2-attribute-set-group-akeneo-code-to-magento-2-id-01K2PMG2HZEVFDF72Q65BXJ5CJ","logger":{"parameters":{"actions":[]}}}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"magento-2-prepare-send-attributes-assign-to-attribute-set","name":"Magento 2 - Prepare send - Attributes Assign to Attribute Set","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"recursively-copy-values-to-children","parameters":{"mergeTemplate":{"attribute_set_id":"&{attributeSet.attribute_set_id}","attribute_group_id":"&{attribute_group_id}"},"childrenPattern":"attributes.*"}}]}},{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"key","parameters":{"keys":[],"root":"attributes"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"assign","value":{"sortOrder":100,"attributeCode":"&{code}","attributeGroupId":"&{attribute_group_id}","attribute_set_id":"&{attribute_set_id}"},"mappers":[]}]}}]}}]}},"description":"This transformer will create the payload to assign attribute into the attribute set and attribute set group.","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"magento-2-send-attributes-assign-to-attribute-set","name":"Magento 2 - Send - Attributes Assign to Attribute Set","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"key","parameters":{"keys":[],"root":"attributes"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"http-transformer","parameters":{"client":"magento-2-http-client","request":{"uri":"/rest/${MAGENTO_STORE}/V1/products/attribute-sets/attributes","method":"POST","payload":"&{assign}","plugins":[],"payloadType":"data","authentications":[]}}}]}}]}},"description":"This transformer will assign the attribute into attribute set and attribute set group.","owner":null,"disabled":false}